version: '3.8'

services:
  md-viewer:
    build: .
    image: md-viewer:latest
    container_name: md-viewer
    ports:
      - "37500:37500"
    volumes:
      # Mount directory containing markdown files (read-only)
      - ./docs:/app/docs:ro
      # Mount dist/web for development (rebuild not required)
      - ./dist/web:/app/dist/web:ro
    environment:
      - NODE_ENV=production
      - DOCS_PATH=/app/docs
      - PORT=37500
    restart: unless-stopped
    # Resource limits
    deploy:
      resources:
        limits:
          cpus: '0.5'
          memory: 256M
        reservations:
          memory: 128M
